import{a as fe,b as _,c as ge,d as ve,e as be,f as he,g as xe,h as _e,i as Ce,j as Se,k as V}from"./chunk-2NQSJM6R.js";import{a as F,b as Pe,c as ye,d as we,e as Fe}from"./chunk-XH5YP7CY.js";import{A as y,Aa as U,B as L,Ba as w,Ca as pe,D as a,Ea as ue,Fa as $,H as g,Ha as O,M as C,O as c,P as v,Q as b,S as te,T as A,U as I,V as t,W as i,X as d,Y as B,Z as h,_ as f,a as ie,b as ne,ba as re,c as N,ca as l,da as x,ea as S,g as D,ga as ae,h as oe,ha as le,ia as q,ja as G,na as H,oa as de,q as p,ra as se,s as z,t as j,u as Z,v as ee,y as P,ya as ce,za as me}from"./chunk-LBKOUTPZ.js";function ke(n,r){if(n&1&&(t(0,"span",11),l(1),i()),n&2){let e,o=f();a(),S(" ",(e=o.user())==null?null:e.fullName,"")}}var X=class n{authService=p(O);user=H(()=>this.authService.user()??null);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=g({type:n,selectors:[["app-admin-dashboard-layout"]],decls:41,vars:1,consts:[[1,"bg-slate-800","overflow-y-scroll","w-screen","h-screen","antialiased","text-slate-300","selection:bg-blue-600","selection:text-white","animate-fadeIn"],[1,"flex","flex-col","relative","w-screen"],["id","menu",1,"bg-gray-900","min-h-screen","z-10","text-slate-300","w-64","fixed","left-0","h-screen","overflow-y-scroll"],["id","logo",1,"my-4","px-6"],["routerLink","/",1,"text-lg","md:text-2xl","font-bold","text-white","font-montserrat","cursor-pointer"],[1,"text-blue-500"],[1,"text-slate-500","text-sm"],["id","profile",1,"px-6","py-10"],[1,"text-slate-500"],["href","#",1,"inline-flex","space-x-2","items-center"],["src","https://images.unsplash.com/photo-1542909168-82c3e7fdca5c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=128&q=80","alt","",1,"rounded-full","w-8","h-8"],[1,"text-sm","md:text-base","font-bold"],["id","nav",1,"w-full","px-6"],["routerLink","/admin/dashboard","routerLinkActive","bg-blue-800",1,"w-full","px-2","inline-flex","space-x-2","items-center","border-b","border-slate-700","py-3","hover:bg-white/5","transition","ease-linear","duration-150"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6","text-white"],["stroke-linecap","round","stroke-linejoin","round","d","M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"],[1,"flex","flex-col"],[1,"text-lg","font-bold","leading-5","text-white"],[1,"text-sm","text-white/50","hidden","md:block"],["routerLink","/admin/products","routerLinkActive","bg-blue-800",1,"w-full","px-2","inline-flex","space-x-2","items-center","border-b","border-slate-700","py-3","hover:bg-white/5","transition","ease-linear","duration-150"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"],[1,"text-lg","text-slate-300","font-bold","leading-5"],[1,"text-sm","text-slate-500","hidden","md:block"],[1,"divider","my-4"],[1,"btn","btn-ghost","text-accent",3,"click"],[1,"flex-1","ml-64","pt-5","px-5"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),l(5," Teslo"),t(6,"span",5),l(7," | shop"),i()(),t(8,"p",6),l(9,"Manage your actions and activities"),i()(),t(10,"div",7)(11,"p",8),l(12,"Bienvenido,"),i(),t(13,"a",9)(14,"span"),d(15,"img",10),i(),C(16,ke,2,1,"span",11),i()(),t(17,"div",12)(18,"a",13)(19,"div"),Z(),t(20,"svg",14),d(21,"path",15),i()(),ee(),t(22,"div",16)(23,"span",17),l(24,"Dashboard"),i(),t(25,"span",18),l(26,"Data Overview"),i()()(),t(27,"a",19)(28,"div"),Z(),t(29,"svg",20),d(30,"path",21),i()(),ee(),t(31,"div",16)(32,"span",22),l(33,"Productos"),i(),t(34,"span",23),l(35,"Listado de productos"),i()()(),t(36,"div",24)(37,"button",25),h("click",function(){return o.authService.logout()}),l(38," Cerrar sesi\xF3n "),i()()()()(),t(39,"div",26),d(40,"router-outlet"),i()()),e&2&&(a(16),b(o.user()?16:-1))},dependencies:[me,w,pe],encapsulation:2})};var K=class n{control=P.required();get errorMessage(){let r=this.control().errors||{};return this.control().touched&&Object.keys(r).length>0?V.getTextError(r):null}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=g({type:n,selectors:[["form-error-label"]],inputs:{control:[1,"control"]},decls:2,vars:1,consts:[[1,"text-red-500","text-xs"]],template:function(e,o){e&1&&(t(0,"span",0),l(1),i()),e&2&&(a(),x(o.errorMessage))},encapsulation:2})};function Te(n,r){if(n&1){let e=B();t(0,"button",15),h("click",function(){let s=z(e).$implicit,m=f();return j(m.onSizeClick(s))}),l(1),i()}if(n&2){let e=r.$implicit,o=f();v("btn-secondary",o.productForm.value.sizes==null?null:o.productForm.value.sizes.includes(e)),a(),S(" ",e," ")}}function De(n,r){n&1&&d(0,"span",20)}function Le(n,r){if(n&1&&d(0,"img",24),n&2){let e=r.$implicit;c("src",e,L)}}function Ae(n,r){n&1&&(t(0,"div",25)(1,"span"),l(2,"Datos actualizados correctamente"),i()())}var W=class n{productService=p(F);router=p(U);product=P.required();isLoading=y(!1);wasSave=y(!1);tempImages=y([]);imageFileList=void 0;imagesToCarousel=H(()=>[...this.product().images,...this.tempImages()]);sizes=["XS","S","M","L","XL","XXL"];fb=p(Ce);formUtils=V;productForm=this.fb.group({title:["",_.required],description:["",_.required],slug:["",[_.required,_.pattern(V.slugPattern)]],price:["",[_.required,_.min(0)]],stock:["",[_.required,_.min(0)]],sizes:[[""]],images:[[]],tags:[""],gender:["men",[_.required,_.pattern(/men|women|kid|unisex/)]]});ngOnInit(){this.setFormValue(this.product())}setFormValue(r){this.productForm.reset(r),this.productForm.patchValue({tags:r.tags?.join(",")})}onSizeClick(r){let e=this.productForm.get("sizes")?.value??[];e.includes(r)?e.splice(e.indexOf(r),1):e.push(r),this.productForm.patchValue({sizes:e})}onSubmit(){return N(this,null,function*(){let r=this.productForm.valid,e=this.productForm.value;if(this.productForm.markAllAsTouched(),!r)return;let o=ne(ie({},e),{tags:e.tags?.toLowerCase().split(",").map(s=>s.trim()??[])});if(this.isLoading.set(!0),this.product().id==="new"){let s=yield D(this.productService.createProdut(o,this.imageFileList));this.isLoading.set(!1),this.router.navigate(["/admin/products",s.id])}else yield D(this.productService.updateProduct(this.product().id,o,this.imageFileList)),this.isLoading.set(!1);this.wasSave.set(!0),setTimeout(()=>{this.wasSave.set(!1)},3e3)})}onFileChange(r){let e=r.target.files;if(this.tempImages.set([]),!e)return;this.imageFileList=e;let o=Array.from(e??[]).map(s=>URL.createObjectURL(s));this.tempImages.set(o)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=g({type:n,selectors:[["product-details"]],inputs:{product:[1,"product"]},decls:50,vars:32,consts:[[1,"text-2xl","font-bold"],[1,"divider"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-2"],[1,"text-2xl","font-bold","h-12"],["type","text","placeholder","T\xEDtulo","formControlName","title",1,"input","input-bordered","w-full"],[3,"control"],["type","text","placeholder","Slug","formControlName","slug",1,"input","input-bordered","w-full"],["placeholder","Descripci\xF3n","rows","6","formControlName","description",1,"textarea","textarea-bordered","w-full"],[1,"text-lg","font-bold"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-2"],["type","number","placeholder","Precio","formControlName","price",1,"input","input-bordered","w-full"],["type","number","placeholder","Inventario","formControlName","stock",1,"input","input-bordered","w-full"],["type","text","placeholder","Tags","formControlName","tags",1,"input","input-bordered","w-full"],[1,"grid","grid-cols-4","gap-2"],["type","button",1,"btn","btn-sm","btn-outline",3,"click"],[1,"grid","grid-cols-6","gap-2"],["type","button",1,"btn","btn-sm","btn-outline",3,"btn-secondary"],[1,"flex","justify-end","h-12"],["type","submit",1,"btn","btn-secondary",3,"disabled"],[1,"loading","loading-spinner","loading-sm"],[3,"images"],["type","file","multiple","","accept","image/*",1,"file-input","file-input-bordered","w-full","mt-4",3,"change"],[1,"grid","grid-cols-2","sm:grid-cols-4","gap-2"],[1,"w-full","h-32","object-cover","rounded-lg",3,"src"],[1,"alert","alert-success","fixed","bottom-4","right-4","w-80","animate-fadeIn"]],template:function(e,o){if(e&1&&(t(0,"h1",0),l(1),i(),d(2,"div",1),t(3,"form",2),h("ngSubmit",function(){return o.onSubmit()}),t(4,"div",3)(5,"h2",4),l(6,"Datos generales"),i(),t(7,"div"),d(8,"input",5),i(),d(9,"form-error-label",6),t(10,"div"),d(11,"input",7)(12,"form-error-label",6),i(),t(13,"div"),d(14,"textarea",8)(15,"form-error-label",6),i(),t(16,"h2",9),l(17,"Datos de venta"),i(),t(18,"div",10)(19,"div"),d(20,"input",11)(21,"form-error-label",6),i(),t(22,"div"),d(23,"input",12)(24,"form-error-label",6),i()(),d(25,"input",13)(26,"form-error-label",6),t(27,"div",14)(28,"button",15),h("click",function(){return o.productForm.patchValue({gender:"men"})}),l(29," Masculino "),i(),t(30,"button",15),h("click",function(){return o.productForm.patchValue({gender:"women"})}),l(31," Femenino "),i(),t(32,"button",15),h("click",function(){return o.productForm.patchValue({gender:"kid"})}),l(33," Kid "),i(),t(34,"button",15),h("click",function(){return o.productForm.patchValue({gender:"unisex"})}),l(35," Unisex "),i()(),t(36,"div",16),A(37,Te,2,3,"button",17,te),i()(),t(39,"div",3)(40,"div",18)(41,"button",19),C(42,De,1,0,"span",20),l(43," Guardar "),i()(),d(44,"product-carousel",21),t(45,"input",22),h("change",function(m){return o.onFileChange(m)}),i(),t(46,"div",23),A(47,Le,1,1,"img",24,te),i()()(),C(49,Ae,3,0,"div",25)),e&2){let s,m,u,E,k,T;a(),x(o.product().title),a(2),c("formGroup",o.productForm),a(5),v("border-red-500",(s=(s=o.productForm.get("title"))==null?null:s.errors)!==null&&s!==void 0?s:!1),a(),c("control",o.productForm.get("title")),a(2),v("border-red-500",(m=(m=o.productForm.get("slug"))==null?null:m.errors)!==null&&m!==void 0?m:!1),a(),c("control",o.productForm.get("slug")),a(2),v("border-red-500",(u=(u=o.productForm.get("description"))==null?null:u.errors)!==null&&u!==void 0?u:!1),a(),c("control",o.productForm.get("description")),a(5),v("border-red-500",(E=(E=o.productForm.get("price"))==null?null:E.errors)!==null&&E!==void 0?E:!1),a(),c("control",o.productForm.get("price")),a(2),v("border-red-500",(k=(k=o.productForm.get("stock"))==null?null:k.errors)!==null&&k!==void 0?k:!1),a(),c("control",o.productForm.get("stock")),a(),v("border-red-500",(T=(T=o.productForm.get("tags"))==null?null:T.errors)!==null&&T!==void 0?T:!1),a(),c("control",o.productForm.get("tags")),a(2),v("btn-primary",o.productForm.value.gender==="men"),a(2),v("btn-accent",o.productForm.value.gender==="women"),a(2),v("btn-warning",o.productForm.value.gender==="kid"),a(2),v("btn-secondary",o.productForm.value.gender==="unisex"),a(3),I(o.sizes),a(4),c("disabled",o.isLoading()),a(),b(o.isLoading()?42:-1),a(2),c("images",o.imagesToCarousel()),a(3),I(o.tempImages()),a(2),b(o.wasSave()?49:-1)}},dependencies:[ye,Se,be,fe,he,ge,ve,xe,_e,K],encapsulation:2})};function Ie(n,r){n&1&&(t(0,"div",0),d(1,"span",2),i())}function Ve(n,r){if(n&1&&d(0,"product-details",1),n&2){let e=f();c("product",e.productResource.value())}}function Me(n,r){n&1&&(t(0,"div",0)(1,"p",3),l(2,"Error loading products"),i()())}var Y=class n{router=p(U);productService=p(F);activatedRouter=p(ce);productId=ue(this.activatedRouter.params.pipe(oe(r=>r.id)));productResource=$({request:()=>({id:this.productId()}),loader:({request:r})=>this.productService.getProductById(r.id)});redireectEffect=de(()=>{this.productResource.error()&&this.router.navigate(["/admin/products"])});static \u0275fac=function(e){return new(e||n)};static \u0275cmp=g({type:n,selectors:[["app-product-admin-page"]],decls:3,vars:3,consts:[[1,"flex","justify-center","items-center","h-screen"],[3,"product"],[1,"loading","loading-spinner","loading-lg"],[1,"text-red-500"]],template:function(e,o){e&1&&C(0,Ie,2,0,"div",0)(1,Ve,1,1,"product-details",1)(2,Me,3,0,"div",0),e&2&&(b(o.productResource.isLoading()?0:-1),a(),b(o.productResource.hasValue()?1:-1),a(),b(o.productResource.error()?2:-1))},dependencies:[W],encapsulation:2})};var Re=n=>["/admin/products",n],Ne=(n,r)=>r.id;function ze(n,r){if(n&1&&(d(0,"img",6),q(1,"productImage")),n&2){let e=f().$implicit;c("src",G(1,2,e.images[0]),L)("alt",e.title)}}function je(n,r){if(n&1&&(d(0,"img",6),q(1,"productImage")),n&2){let e=f().$implicit;c("src",G(1,2,e.images),L)("alt",e.title)}}function Be(n,r){if(n&1&&(t(0,"span",9),l(1),i()),n&2){let e=f().$implicit;a(),x(e.stock)}}function qe(n,r){if(n&1&&(t(0,"span",10),l(1),i()),n&2){let e=f().$implicit;a(),x(e.stock)}}function Ge(n,r){if(n&1&&(t(0,"span",11),l(1),i()),n&2){let e=f().$implicit;a(),x(e.stock)}}function He(n,r){if(n&1&&(t(0,"tr")(1,"th")(2,"label"),d(3,"input",2),i()(),t(4,"td")(5,"div",3)(6,"div",4)(7,"div",5),C(8,ze,2,4,"img",6)(9,je,2,4,"img",6),i()(),t(10,"div")(11,"a",7),l(12),i(),t(13,"div",8),l(14),i()()()(),t(15,"td"),l(16),q(17,"currency"),i(),t(18,"td"),C(19,Be,2,1,"span",9)(20,qe,2,1,"span",10)(21,Ge,2,1,"span",11),i(),t(22,"th")(23,"a",12),l(24,"Detalles"),i()()()),n&2){let e=r.$implicit;a(8),b(e.images.length>1?8:9),a(4),x(e.title),a(2),S(" ",e.sizes.join(", ")," "),a(2),S(" ",G(17,6,e.price)," "),a(3),b(e.stock<=10?19:e.stock<=20?20:21),a(4),c("routerLink",le(8,Re,e.id))}}var J=class n{products=P.required();static \u0275fac=function(e){return new(e||n)};static \u0275cmp=g({type:n,selectors:[["product-table"]],inputs:{products:[1,"products"]},decls:17,vars:0,consts:[[1,"overflow-x-auto"],[1,"table"],["type","checkbox",1,"checkbox"],[1,"flex","items-center","gap-3"],[1,"avatar"],[1,"mask","mask-squircle","h-12","w-12"],[3,"src","alt"],["routerLink","['/admin/products', product.id]",1,"font-bold","hover:text-accent","transition-colors","duration-300"],[1,"text-sm","opacity-50"],[1,"badge","badge-error"],[1,"badge","badge-warning"],[1,"badge","badge-success"],[1,"btn","btn-ghost","text-accent","btn-xs",3,"routerLink"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th")(5,"label"),d(6,"input",2),i()(),t(7,"th"),l(8,"T\xEDtulo"),i(),t(9,"th"),l(10,"Precio"),i(),t(11,"th"),l(12,"Inventario"),i(),d(13,"th"),i()(),t(14,"tbody"),A(15,He,25,10,"tr",null,Ne),i()()()),e&2&&(a(15),I(o.products()))},dependencies:[Pe,w,se],encapsulation:2})};var Ue=()=>[],Q=class n{productService=p(F);paginationService=p(we);productPerPage=y(10);productResource=$({request:()=>({page:this.paginationService.currentPage()-1,limit:this.productPerPage()}),loader:({request:r})=>this.productService.getProducts({offset:r.page*r.limit,limit:r.limit})});static \u0275fac=function(e){return new(e||n)};static \u0275cmp=g({type:n,selectors:[["app-products-admin-page"]],decls:23,vars:5,consts:[["select",""],[1,"text-2xl","font-bold"],[1,"text-lg"],[1,"text-accent"],[1,"divider"],[1,"flex","items-center","justify-between"],[3,"pages","currentPage"],[1,"select","select-bordered","-mt-5","w-32",3,"change"],["value","10"],["value","20"],["value","50"],["value","100"],[1,"flex","flex-1"],["routerLink","/admin/products/new",1,"btn","btn-primary","-mt-5"],[3,"products"]],template:function(e,o){if(e&1){let s=B();t(0,"h1",1),l(1,"Listado de productos"),i(),t(2,"h3",2),l(3," Total de productos "),t(4,"span",3),l(5),i()(),d(6,"div",4),t(7,"div",5),d(8,"pagination",6),t(9,"select",7,0),h("change",function(){z(s);let u=re(10);return j(o.productPerPage.set(+u.value))}),t(11,"option",8),l(12,"10"),i(),t(13,"option",9),l(14,"20"),i(),t(15,"option",10),l(16,"50"),i(),t(17,"option",11),l(18,"100"),i()(),d(19,"div",12),t(20,"button",13),l(21,"Nuevo producto"),i()(),d(22,"product-table",14)}if(e&2){let s,m,u;a(5),x((s=o.productResource.value())==null?null:s.count),a(3),c("pages",(m=(m=o.productResource.value())==null?null:m.pages)!==null&&m!==void 0?m:0)("currentPage",o.paginationService.currentPage()),a(14),c("products",(u=(u=o.productResource.value())==null?null:u.products)!==null&&u!==void 0?u:ae(4,Ue))}},dependencies:[J,Fe,w],encapsulation:2})};var Ee=(n,r)=>N(void 0,null,function*(){let e=p(O);return yield D(e.checkAuthStatus()),e.isAdmin()});var $e=[{path:"",loadComponent:()=>X,canMatch:[Ee],children:[{path:"products",loadComponent:()=>Q},{path:"products/:id",loadComponent:()=>Y},{path:"**",redirectTo:"products"}]}],Ot=$e;export{$e as adminDashboardRoutes,Ot as default};
